2023-09-04 16:08:52.828 +02:00 [Information] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*) FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"rootpage\" IS NOT NULL;"
2023-09-04 16:08:52.861 +02:00 [Information] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""PRAGMA journal_mode = 'wal';"
2023-09-04 16:08:52.894 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE \"Customers\" (
    \"Id\" INTEGER NOT NULL CONSTRAINT \"PK_Customers\" PRIMARY KEY AUTOINCREMENT,
    \"Name\" TEXT NOT NULL,
    \"Address\" TEXT NOT NULL
);"
2023-09-04 16:08:52.894 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE \"Items\" (
    \"Id\" INTEGER NOT NULL CONSTRAINT \"PK_Items\" PRIMARY KEY AUTOINCREMENT,
    \"Name\" TEXT NOT NULL,
    \"Price\" TEXT NOT NULL,
    \"Description\" TEXT NULL,
    \"ImageUrl\" TEXT NULL
);"
2023-09-04 16:08:52.895 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE \"Orders\" (
    \"Id\" INTEGER NOT NULL CONSTRAINT \"PK_Orders\" PRIMARY KEY AUTOINCREMENT,
    \"OrderDate\" TEXT NOT NULL,
    \"CustomerId\" INTEGER NOT NULL,
    \"TotalPrice\" TEXT NOT NULL,
    CONSTRAINT \"FK_Orders_Customers_CustomerId\" FOREIGN KEY (\"CustomerId\") REFERENCES \"Customers\" (\"Id\") ON DELETE CASCADE
);"
2023-09-04 16:08:52.896 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE TABLE \"OrderItems\" (
    \"Id\" INTEGER NOT NULL CONSTRAINT \"PK_OrderItems\" PRIMARY KEY AUTOINCREMENT,
    \"ItemId\" INTEGER NOT NULL,
    \"Quantity\" INTEGER NOT NULL,
    \"OrderId\" INTEGER NOT NULL,
    \"OrderItemPrice\" TEXT NOT NULL,
    CONSTRAINT \"FK_OrderItems_Items_ItemId\" FOREIGN KEY (\"ItemId\") REFERENCES \"Items\" (\"Id\") ON DELETE CASCADE,
    CONSTRAINT \"FK_OrderItems_Orders_OrderId\" FOREIGN KEY (\"OrderId\") REFERENCES \"Orders\" (\"Id\") ON DELETE CASCADE
);"
2023-09-04 16:08:52.896 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX \"IX_OrderItems_ItemId\" ON \"OrderItems\" (\"ItemId\");"
2023-09-04 16:08:52.897 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX \"IX_OrderItems_OrderId\" ON \"OrderItems\" (\"OrderId\");"
2023-09-04 16:08:52.897 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""CREATE INDEX \"IX_Orders_CustomerId\" ON \"Orders\" (\"CustomerId\");"
2023-09-04 16:08:52.962 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM \"Items\" AS \"i\")"
2023-09-04 16:08:53.011 +02:00 [Information] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 96), @p1='?' (Size = 17), @p2='?' (Size = 5), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Items\" (\"Description\", \"ImageUrl\", \"Name\", \"Price\")
VALUES (@p0, @p1, @p2, @p3)
RETURNING \"Id\";"
2023-09-04 16:08:53.016 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 108), @p1='?' (Size = 22), @p2='?' (Size = 17), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Items\" (\"Description\", \"ImageUrl\", \"Name\", \"Price\")
VALUES (@p0, @p1, @p2, @p3)
RETURNING \"Id\";"
2023-09-04 16:08:53.016 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 103), @p1='?' (Size = 23), @p2='?' (Size = 12), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Items\" (\"Description\", \"ImageUrl\", \"Name\", \"Price\")
VALUES (@p0, @p1, @p2, @p3)
RETURNING \"Id\";"
2023-09-04 16:08:53.017 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 84), @p1='?' (Size = 16), @p2='?' (Size = 12), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Items\" (\"Description\", \"ImageUrl\", \"Name\", \"Price\")
VALUES (@p0, @p1, @p2, @p3)
RETURNING \"Id\";"
2023-09-04 16:08:53.017 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 126), @p1='?' (Size = 17), @p2='?' (Size = 5), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Items\" (\"Description\", \"ImageUrl\", \"Name\", \"Price\")
VALUES (@p0, @p1, @p2, @p3)
RETURNING \"Id\";"
2023-09-04 16:08:53.018 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 97), @p1='?' (Size = 24), @p2='?' (Size = 14), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Items\" (\"Description\", \"ImageUrl\", \"Name\", \"Price\")
VALUES (@p0, @p1, @p2, @p3)
RETURNING \"Id\";"
2023-09-04 16:08:53.018 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 92), @p1='?' (Size = 17), @p2='?' (Size = 5), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Items\" (\"Description\", \"ImageUrl\", \"Name\", \"Price\")
VALUES (@p0, @p1, @p2, @p3)
RETURNING \"Id\";"
2023-09-04 16:08:53.019 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 71), @p1='?' (Size = 16), @p2='?' (Size = 4), @p3='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Items\" (\"Description\", \"ImageUrl\", \"Name\", \"Price\")
VALUES (@p0, @p1, @p2, @p3)
RETURNING \"Id\";"
2023-09-04 16:08:53.022 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM \"Customers\" AS \"c\")"
2023-09-04 16:08:53.028 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 11), @p1='?' (Size = 12)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Customers\" (\"Address\", \"Name\")
VALUES (@p0, @p1)
RETURNING \"Id\";"
2023-09-04 16:08:53.028 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 14), @p1='?' (Size = 12)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Customers\" (\"Address\", \"Name\")
VALUES (@p0, @p1)
RETURNING \"Id\";"
2023-09-04 16:08:53.030 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM \"Orders\" AS \"o\")"
2023-09-04 16:08:53.039 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 20), @p2='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Orders\" (\"CustomerId\", \"OrderDate\", \"TotalPrice\")
VALUES (@p0, @p1, @p2)
RETURNING \"Id\";"
2023-09-04 16:08:53.041 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (Size = 20), @p2='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"Orders\" (\"CustomerId\", \"OrderDate\", \"TotalPrice\")
VALUES (@p0, @p1, @p2)
RETURNING \"Id\";"
2023-09-04 16:08:53.042 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT EXISTS (
    SELECT 1
    FROM \"OrderItems\" AS \"o\")"
2023-09-04 16:08:53.048 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"OrderItems\" (\"ItemId\", \"OrderId\", \"OrderItemPrice\", \"Quantity\")
VALUES (@p0, @p1, @p2, @p3)
RETURNING \"Id\";"
2023-09-04 16:08:53.049 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"OrderItems\" (\"ItemId\", \"OrderId\", \"OrderItemPrice\", \"Quantity\")
VALUES (@p0, @p1, @p2, @p3)
RETURNING \"Id\";"
2023-09-04 16:08:53.049 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO \"OrderItems\" (\"ItemId\", \"OrderId\", \"OrderItemPrice\", \"Quantity\")
VALUES (@p0, @p1, @p2, @p3)
RETURNING \"Id\";"
2023-09-04 16:08:53.120 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT \"o\".\"Id\", \"o\".\"CustomerId\", \"o\".\"OrderDate\", \"o\".\"TotalPrice\", \"o0\".\"Id\", \"o0\".\"ItemId\", \"o0\".\"OrderId\", \"o0\".\"OrderItemPrice\", \"o0\".\"Quantity\"
FROM \"Orders\" AS \"o\"
LEFT JOIN \"OrderItems\" AS \"o0\" ON \"o\".\"Id\" = \"o0\".\"OrderId\"
ORDER BY \"o\".\"Id\""
2023-09-04 16:08:53.124 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""UPDATE \"Orders\" SET \"TotalPrice\" = @p0
WHERE \"Id\" = @p1
RETURNING 1;"
2023-09-04 16:08:53.125 +02:00 [Information] Executed DbCommand ("0"ms) [Parameters=["@p1='?' (DbType = Int32), @p0='?' (DbType = Decimal)"], CommandType='Text', CommandTimeout='30']"
""UPDATE \"Orders\" SET \"TotalPrice\" = @p0
WHERE \"Id\" = @p1
RETURNING 1;"
2023-09-04 16:08:53.180 +02:00 [Information] User profile is available. Using '"/Users/mathiaskolberg/.aspnet/DataProtection-Keys"' as key repository; keys will not be encrypted at rest.
2023-09-04 16:08:53.355 +02:00 [Information] Now listening on: "https://localhost:7162"
2023-09-04 16:08:53.356 +02:00 [Information] Now listening on: "http://localhost:5230"
2023-09-04 16:08:53.358 +02:00 [Information] Application started. Press Ctrl+C to shut down.
2023-09-04 16:08:53.358 +02:00 [Information] Hosting environment: "Development"
2023-09-04 16:08:53.359 +02:00 [Information] Content root path: "/Users/mathiaskolberg/Library/Mobile Documents/com~apple~CloudDocs/OsloMet/3. År/Høst/Webapplikasjoner/2_MVC/MyShop"
2023-09-04 16:08:54.563 +02:00 [Information] Request starting HTTP/1.1 GET https://localhost:7162/ - -
2023-09-04 16:08:54.576 +02:00 [Information] Executing endpoint '"MyShop.Controllers.HomeController.Index (MyShop)"'
2023-09-04 16:08:54.580 +02:00 [Information] Route matched with "{action = \"Index\", controller = \"Home\"}". Executing controller action with signature "Microsoft.AspNetCore.Mvc.IActionResult Index()" on controller "MyShop.Controllers.HomeController" ("MyShop").
2023-09-04 16:08:54.584 +02:00 [Information] Executing ViewResult, running view "Index".
2023-09-04 16:08:54.611 +02:00 [Information] Executed ViewResult - view "Index" executed in 27.4193ms.
2023-09-04 16:08:54.612 +02:00 [Information] Executed action "MyShop.Controllers.HomeController.Index (MyShop)" in 30.8992ms
2023-09-04 16:08:54.612 +02:00 [Information] Executed endpoint '"MyShop.Controllers.HomeController.Index (MyShop)"'
2023-09-04 16:08:54.613 +02:00 [Information] Request finished HTTP/1.1 GET https://localhost:7162/ - - - 200 - text/html;+charset=utf-8 50.5951ms
2023-09-04 16:08:57.119 +02:00 [Information] Request starting HTTP/1.1 GET https://localhost:7162/Item/Table - -
2023-09-04 16:08:57.123 +02:00 [Information] Executing endpoint '"MyShop.Controllers.ItemController.Table (MyShop)"'
2023-09-04 16:08:57.129 +02:00 [Information] Route matched with "{action = \"Table\", controller = \"Item\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Table()" on controller "MyShop.Controllers.ItemController" ("MyShop").
2023-09-04 16:08:57.131 +02:00 [Information] Executed action "MyShop.Controllers.ItemController.Table (MyShop)" in 1.5496ms
2023-09-04 16:08:57.132 +02:00 [Information] Executed endpoint '"MyShop.Controllers.ItemController.Table (MyShop)"'
2023-09-04 16:08:57.158 +02:00 [Error] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'MyShop.DAL.ItemRepository' while attempting to activate 'MyShop.Controllers.ItemController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method273(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-09-04 16:08:57.172 +02:00 [Information] Request finished HTTP/1.1 GET https://localhost:7162/Item/Table - - - 500 - text/html;+charset=utf-8 53.1904ms
